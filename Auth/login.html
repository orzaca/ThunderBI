<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Login - Zirius Mobile</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="/css/dashboard_cliente_hoy.css">
  <style>
    /* estilos mínimos de la pantalla login para que luzca bien */
    body { margin:0; font-family: 'Poppins', sans-serif; background: linear-gradient(180deg,#071126,#001228); color:#e6eef6; }
    .card { max-width:420px; margin:72px auto; padding:20px; background: rgba(7,17,34,0.9); border-radius:12px; box-shadow: 0 12px 36px rgba(2,6,23,0.6); }
    input { width:100%; padding:10px 12px; margin-top:6px; border-radius:8px; border:1px solid rgba(148,163,184,0.08); background: rgba(255,255,255,0.02); color: #eef8ff; }
    button { margin-top:10px; padding:10px 14px; border-radius:8px; background: linear-gradient(90deg,#0ea5e9,#22c55e); color:#071126; border:none; cursor:pointer; font-weight:600; }
    .note { font-size:12px; color:#9ca3af; margin-top:10px; }
    #loginError { color:#fb7185; margin-top:8px; font-size:13px; }
  </style>
</head>
<body>
  <div class="card">
    <h2>Zirius Mobile</h2>
    <p>Ingresa con tu correo y contraseña</p>

    <form id="loginForm">
      <label>
        Correo
        <input id="email" type="email" required autocomplete="username" />
      </label>

      <label>
        Contraseña
        <input id="password" type="password" required autocomplete="current-password" />
      </label>

      <button type="submit" id="btnLogin">Entrar</button>
      <div id="loginError" role="alert" aria-live="polite"></div>
    </form>

    <p class="note">Si no tienes usuario, crea uno en Firebase Console → Authentication → Users (Add user).</p>
  </div>

  <!-- Uso de la versión modular (ES Modules) -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
    import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";

    // --- Pega aquí tu firebaseConfig (el que ya tienes)
    const firebaseConfig = {
      apiKey: "AIzaSyA4aeYmGj3qB-pn_XPrktI0YyniQRWQfZo",
      authDomain: "sirius-381d6.firebaseapp.com",
      projectId: "sirius-381d6",
      storageBucket: "sirius-381d6.firebasestorage.app",
      messagingSenderId: "651748635041",
      appId: "1:651748635041:web:e3a1c502aed11c2ac2dbe0"
    };

    // Inicializar app y auth
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    const form = document.getElementById('loginForm');
    const errEl = document.getElementById('loginError');
    const btn = document.getElementById('btnLogin');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      errEl.textContent = '';
      btn.disabled = true;
      btn.textContent = 'Entrando...';

      const email = document.getElementById('email').value.trim();
      const password = document.getElementById('password').value.trim();

      try {
        await signInWithEmailAndPassword(auth, email, password);
        // Al entrar, Firebase mantiene la sesión; redirigimos al dashboard
        window.location.href = '/dashboard_cliente_hoy.html';
      } catch (err) {
        console.error('Error login:', err);
        errEl.textContent = 'Usuario o contraseña incorrectos.';
        btn.disabled = false;
        btn.textContent = 'Entrar';
      }
    });
  </script>
</body>
</html>
